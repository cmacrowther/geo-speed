<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Geo speed</title>
    <!-- Latest compiled and minified CSS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="./custom.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ol3/3.7.0/ol.css" type="text/css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ol3/3.7.0/ol.js"></script>

<!-- Latest compiled and minified JavaScript -->
<script src="http://openlayers.org/en/v3.7.0/build/ol.js" type="text/javascript"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
</head>
<body>

<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" id="myModal">
  <div class="modal-dialog modal-lg">
    <div class="modal-content loadingModal">
        <h1>Geo-Speed</h1>
        <p>Geo-Speed is a web app designed by Todd, Colin, Connor, and Adam for the IT Garage Hackathon.
            The premise of Geo-Speed is to provide users with various connection speeds of users within the region.</p>
        <p>Enter your address below and we will calculate your network speed hello and plot it on a map.</p>
        <form>
          <div class="col-xs-12 form-group">
            <label for="exampleInputEmail1">Street Address</label>
            <input type="text" class="form-control" id="address" value="">
          </div>

        </form>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button"  onclick="submit(crd)" class="btn btn-primary">Plot my data</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<div class="container">
    <div class="row">
     <div class="col-xs-12 text-center"><H1>Geo-Speed</H1></div><hr/>
     <div class="col-xs-6 col-md-4"><p>Different speeds according to location</p></div>
    </div>
    <div class="row">
     <div class="col-xs-6 col-sm-4">.col-xs-6 .col-sm-4</div>
      <div class="col-xs-6 col-sm-4">.col-xs-6 .col-sm-4</div>
      <div class="clearfix visible-xs-block"></div>
      <div class="col-xs-6 col-sm-4">.col-xs-6 .col-sm-4</div>
    </div>
    <script type="text/javascript">
    $(window).load(function(){
        $('#myModal').modal('show');
    });
        $("#ID").click(function(e){
        e.preventDefault();

    });

    function submit(pos) {
        console.log(pos);
        $.post("/submit",
                {
                    longitude: "-63",
                    latitude: "45",
                    upload: "1",
                    download: "1",
                    isp: "Rogers"
                });
    }
    </script>
    </div>
<div class="container-fluid">

<div class="row-fluid">
  <div class="span12">
    <div id="map" class="map"></div>
  </div>
</div>

</div>
<script>
crd = null;
    if (navigator.geolocation) {
    var options = {
  enableHighAccuracy: true,
  timeout: 5000,
  maximumAge: 0
};
function success(pos) {
    crd = pos.coords;
  var map = new ol.Map({
  layers: [
    new ol.layer.Tile({
      source: new ol.source.OSM()
    })
  ],
  controls: ol.control.defaults({
    attributionOptions: /** @type {olx.control.AttributionOptions} */ ({
      collapsible: false
    })
  }),
  target: 'map',
  view: new ol.View({
    center: ol.proj.transform([crd.longitude, crd.latitude], 'EPSG:4326', 'EPSG:3857'),
    zoom: 11
  })
});

};

function error(err) {
  console.warn('ERROR(' + err.code + '): ' + err.message);
};

navigator.geolocation.getCurrentPosition(success, error, options);
} else {
    console.log ("Geolocation is not supported by this browser.");
}


</script>
</body>
</html>